webpackJsonp([3036334675900],{381:function(n,s){n.exports={data:{markdownRemark:{html:'<p>Django REST frameworkëŠ” ë‹¤ì–‘í•œ ì•±ì—ì„œ DBì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” API endpointë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. <a href="http://www.django-rest-framework.org/tutorial/1-serialization/">Django REST framework Tutorial</a>ì„ ë”°ë¼í•˜ë©° ê³µë¶€í•œ ë‚´ìš©ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.</p>\n<p>ğŸ‘‰ <a href="/drf2">Django REST framework (2) - Authentication &#x26; Permissions, Relationships &#x26; Hyperlinked API</a></p>\n<hr>\n<h2>1. Serializer.py</h2>\n<p>Serializing ì€ <a href="http://www.django-rest-framework.org/tutorial/1-serialization/#working-with-serializers">ëª¨ë¸ ê°ì²´ë¥¼ Python ë„¤ì´í‹°ë¸Œ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ, ê·¸ê²ƒì„ ë‹¤ì‹œ JSONìœ¼ë¡œ ë³€í™˜</a>í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤.</p>\n<p>íŒŒì´ì¬ ì½”ë“œë¡œ ì ‘ê·¼í•˜ë˜ ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•´ì£¼ëŠ” ê²ƒì´ ë°”ë¡œ ì´ <code>Serializer.py</code> ì˜ ì—­í• ì´ë‹¤. (ì ‘ê·¼ ê°€ëŠ¥í•œ API endpoint ë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì€ ë°ì´í„° íƒ€ì…ì„ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ë§Œë“ ë‹¤ëŠ” ì˜ë¯¸ë„ í¬í•¨í•˜ëŠ” ê²ƒ ì•„ë‹ê¹Œ...)</p>\n<p>Serializer í´ë˜ìŠ¤ëŠ” ì¥ê³ ì˜ í¼ í´ë˜ìŠ¤ì™€ ë§¤ìš° ë¹„ìŠ·í•˜ë‹¤. í•„ë“œì— <code>required</code>, <code>max_length</code>, <code>default</code> ê°™ì€ í”Œë˜ê·¸ë„ ë˜‘ê°™ì´ ì‚¬ìš©í•œë‹¤.</p>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> snippets<span class="token punctuation">.</span>models <span class="token keyword">import</span> Snippet\n<span class="token keyword">from</span> snippets<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> SnippetSerializer\n<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>renderers <span class="token keyword">import</span> JSONRenderer\n<span class="token keyword">from</span> rest_framework<span class="token punctuation">.</span>parsers <span class="token keyword">import</span> JSONParser\n\nsnippet <span class="token operator">=</span> Snippet<span class="token punctuation">(</span>code<span class="token operator">=</span><span class="token string">\'foo = "bar"\\n\'</span><span class="token punctuation">)</span>\nsnippet<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>\n\nsnippet <span class="token operator">=</span> Snippet<span class="token punctuation">(</span>code<span class="token operator">=</span><span class="token string">\'print "hello, world"\\n\'</span><span class="token punctuation">)</span>\nsnippet<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python">serializer <span class="token operator">=</span> SnippetSerializer<span class="token punctuation">(</span>snippet<span class="token punctuation">)</span>\nserializer<span class="token punctuation">.</span>data\n<span class="token comment"># {\'id\': 2, \'title\': u\'\', \'code\': u\'print "hello, world"\\n\', \'linenos\': False, \'language\': u\'python\', \'style\': u\'friendly\'}</span>\n</code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python">content <span class="token operator">=</span> JSONRenderer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>render<span class="token punctuation">(</span>serializer<span class="token punctuation">.</span>data<span class="token punctuation">)</span>\ncontent\n<span class="token comment"># \'{"id": 2, "title": "", "code": "print \\\\"hello, world\\\\"\\\\n", "linenos": false, "language": "python", "style": "friendly"}\'</span>\n</code></pre>\n      </div>\n<p>Deserializing ì€ ê·¸ ë°˜ëŒ€ì˜ í”„ë¡œì„¸ìŠ¤(JSONì—ì„œ Python native dataë¡œ)ë¥¼ ì˜ë¯¸í•œë‹¤.</p>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> django<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>six <span class="token keyword">import</span> BytesIO\n\nstream <span class="token operator">=</span> BytesIO<span class="token punctuation">(</span>content<span class="token punctuation">)</span>\ndata <span class="token operator">=</span> JSONParser<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span>stream<span class="token punctuation">)</span>\n</code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python">serializer <span class="token operator">=</span> SnippetSerializer<span class="token punctuation">(</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>\nserializer<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment"># True</span>\nserializer<span class="token punctuation">.</span>validated_data\n<span class="token comment"># OrderedDict([(\'title\', \'\'), (\'code\', \'print "hello, world"\\n\'), (\'linenos\', False), (\'language\', \'python\'), (\'style\', \'friendly\')])</span>\nserializer<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token comment"># &lt;Snippet: Snippet object></span>\n</code></pre>\n      </div>\n<ul>\n<li>** Githubì—ì„œ ì†ŒìŠ¤ì½”ë“œ ë³´ê¸° - <a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/serializers.py">serializers.py</a></li>\n</ul>\n<hr>\n<h2>2. Requests and Responses</h2>\n<ol>\n<li>Request objects</li>\n<li>DRF ì˜ <code>request.data</code> ëŠ” ì¼ë°˜ì ì¸ <code>HttpRequest</code> ë³´ë‹¤ ë” ìœ ì—°(flexible request parsing)í•˜ë‹¤.</li>\n</ol>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python">request<span class="token punctuation">.</span>POST  <span class="token comment"># í¼ ë°ì´í„°ë§Œ ë‹¤ë£¸. POST ë©”ì†Œë“œë§Œ ê°€ëŠ¥.</span>\nrequest<span class="token punctuation">.</span>data  <span class="token comment"># ì„ì˜ ë°ì´í„° ë‹¤ë£¸. POST, PUT, PATCH ê°€ëŠ¥.</span>\n</code></pre>\n      </div>\n<ol start="2">\n<li>Resposne objects</li>\n<li>Responseë„ JSONResponseì¸ì§€, HttpResponse ì¸ì§€ ëª…ì‹œí•  í•„ìš”ê°€ ì—†ë‹¤. í´ë¼ì´ì–¸íŠ¸ request ì—ì„œ ë“¤ì–´ì˜¨ content typeì— ë”°ë¼ ìë™ìœ¼ë¡œ ì•Œë§ì€ content typeì˜ responseë¥¼ ë¦¬í„´í•˜ê¸° ë•Œë¬¸ì´ë‹¤. (<a href="https://en.wikipedia.org/wiki/Content_negotiation">ì°¸ê³  - Content negotiation</a>) ì´ê²ƒì˜ ì¥ì ì€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ìš”ì²­ì´ ë“¤ì–´ì™”ì„ ê²½ìš°, responseë„ html í˜•ì‹ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤(<a href="http://www.django-rest-framework.org/topics/browsable-api/">browsable-api</a>)ëŠ” ì ì´ë‹¤.</li>\n</ol>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">return</span> Response<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment"># í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ëœ íƒ€ì…ìœ¼ë¡œ ë Œë”ë§ í•œë‹¤.</span>\n</code></pre>\n      </div>\n<ol start="3">\n<li>\n<p>Status codes</p>\n</li>\n<li>\n<p><code>status</code> ëª¨ë“ˆì—ì„œëŠ” <code>HTTP_400_BAD_REQUEST</code>ì™€ ê°™ì´ ëª…ì‹œì ì¸ status codeë¥¼ ì œê³µí•œë‹¤. ì„¸ìë¦¬ ìˆ«ìë§Œ ì‚¬ìš©í•˜ëŠ” status code ë³´ë‹¤ ë” ì´í•´í•˜ê¸° ì‰½ë‹¤.</p>\n</li>\n<li>\n<p>Wrapping API Views</p>\n</li>\n<li>\n<p>FBVì—ì„œëŠ” <code>@api_view</code> ì¥ì‹ìë¥¼, CBVì—ì„œëŠ” <code>APIView</code> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ API viewë¥¼ ë˜í•‘í•˜ì—¬ ì‚¬ìš©í•œë‹¤. Request, response, status, error ì™€ ê´€ë ¨ëœ ê¸°ëŠ¥ì´ ì‘ë™í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.</p>\n</li>\n</ol>\n<hr>\n<h2>3. Class Based View</h2>\n<ul>\n<li>Mixin ì‚¬ìš©í•˜ê¸° : CRUD ëŠ” ë°˜ë³µë˜ëŠ” íŒ¨í„´ì´ë‹¤. DRFì—ì„œëŠ” Mixinì— ì´ë¥¼ ë¯¸ë¦¬ êµ¬í˜„í•´ ë†“ì•˜ë‹¤. ì´ë¥¼ CBV ì—ì„œ ì ì ˆíˆ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•˜ë©´ ëœë‹¤.</li>\n</ul>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> snippets<span class="token punctuation">.</span>models <span class="token keyword">import</span> Snippet\n<span class="token keyword">from</span> snippets<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> SnippetSerializer\n<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> mixins\n<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> generics\n\n<span class="token keyword">class</span> <span class="token class-name">SnippetList</span><span class="token punctuation">(</span>mixins<span class="token punctuation">.</span>ListModelMixin<span class="token punctuation">,</span>\n                  mixins<span class="token punctuation">.</span>CreateModelMixin<span class="token punctuation">,</span>\n                  generics<span class="token punctuation">.</span>GenericAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    queryset <span class="token operator">=</span> Snippet<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    serializer_class <span class="token operator">=</span> SnippetSerializer\n\n    <span class="token comment"># The base class provides the core functionality, and the mixin classes provide the .list() and .create() actions. We\'re then explicitly binding the get and post methods to the appropriate actions.</span>\n\n    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>    \n        <span class="token comment"># `*args`, `**kwargs` ì—ëŠ” snippetì˜ idë‚˜ titleê°™ì€ íŒŒë¼ë¯¸í„°ê°€ ë“¤ì–´ê°„ë‹¤.</span>\n        <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token builtin">list</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>\n\n    <span class="token keyword">def</span> <span class="token function">post</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>\n        <span class="token keyword">return</span> self<span class="token punctuation">.</span>create<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>\n</code></pre>\n      </div>\n<p>ì—¬ê¸°ì„œ <code>ListModelMixin</code>, <code>CreateModelMixin</code> ë“±ì„ í•œë²ˆ ë” ë˜í•‘í•œ generics classë¥¼ ì“°ë©´ ì•„ë˜ì²˜ëŸ¼ ë” ì§§ì•„ì§„ë‹¤.</p>\n<p>** Githubì—ì„œ ì†ŒìŠ¤ì½”ë“œ ë³´ê¸° - <a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/mixins.py">mixins.py</a>,  <a href="https://github.com/encode/django-rest-framework/blob/master/rest_framework/generics.py">generics.py</a></p>\n<div class="gatsby-highlight">\n      <pre class="language-python"><code class="language-python"><span class="token keyword">from</span> snippets<span class="token punctuation">.</span>models <span class="token keyword">import</span> Snippet\n<span class="token keyword">from</span> snippets<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> SnippetSerializer\n<span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> generics\n\n<span class="token keyword">class</span> <span class="token class-name">SnippetList</span><span class="token punctuation">(</span>generics<span class="token punctuation">.</span>ListCreateAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    queryset <span class="token operator">=</span> Snippet<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    serializer_class <span class="token operator">=</span> SnippetSerializer\n\n<span class="token keyword">class</span> <span class="token class-name">SnippetDetail</span><span class="token punctuation">(</span>generics<span class="token punctuation">.</span>RetrieveUpdateDestroyAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    queryset <span class="token operator">=</span> Snippet<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    serializer_class <span class="token operator">=</span> SnippetSerializer\n</code></pre>\n      </div>\n<p>To be continued!</p>',frontmatter:{title:"Django REST framework (1)",date:"2017-09-04",path:"/drf1",tags:["REST","Django"],excerpt:"Serialization, Requests & Responses, Class-based views"}}},pathContext:{}}}});
//# sourceMappingURL=path---drf-1-a70e169c90703ddd4073.js.map