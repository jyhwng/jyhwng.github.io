{"componentChunkName":"component---src-templates-blog-post-js","path":"/react-typescript-nextjs","webpackCompilationHash":"4b7da702d8e0718378ea","result":{"data":{"markdownRemark":{"html":"<h2>Next.js ë€?</h2>\n<p><a href=\"https://nextjs.org/\">Next.js</a> ëŠ” Webpack ë“± ì„¤ì •ì—†ì´ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§, ë¼ìš°íŒ…, ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” React í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. í•„ìš”í•  ê²½ìš°ì—ëŠ” <code class=\"language-text\">next.config.js</code> ì•ˆì—ì„œ Webpack ì„¤ì • ë“±ì„ ì˜¤ë²„ë¼ì´ë”©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<blockquote>\n<p>ğŸ‘‰ <a href=\"https://medium.freecodecamp.org/demystifying-reacts-server-side-render-de335d408fe4\">ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§(Sever Side Rendering, SSR)</a> : ê¸°ì¡´ì˜ Single Page App ì—ì„œëŠ” ì´ˆê¸°ì— ë¡œë“œë˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ html ì„ ê·¸ë¦¬ê²Œ ë©ë‹ˆë‹¤. SSR ì€ ì„œë²„ì—ì„œ html ì„ ê·¸ë ¤ì„œ ë¦¬í„´í•©ë‹ˆë‹¤. ê²€ìƒ‰ ì—”ì§„ì—ì„œ html í¬ë¡¤ë§ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— SEO ì— ìœ ë¦¬í•˜ê³ , ì´ˆê¸°ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ì„ ë¶ˆëŸ¬ì„œ ë Œë”ë§í•˜ëŠ” ì‹œê°„ë„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<p>ì´ í¬ìŠ¤íŒ…ì—ì„œëŠ” Next.js ë¡œ React í”„ë¡œì íŠ¸ë¥¼ êµ¬ì„±í•˜ê³ , TypeScript ì™€ ê´€ë ¨ëœ ì„¤ì •ì„ í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.</p>\n<hr>\n<h2>1. Setup</h2>\n<h3>1. Install packages</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> react @types/react next @types/next\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> typescript @zeit/next-typescript</code></pre>\n      </div>\n<h3>2. Add <code class=\"language-text\">.babelrc</code></h3>\n<p>í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œì— <code class=\"language-text\">.babelrc</code>ë¥¼ ì¶”ê°€í•˜ê³  ì•„ë˜ì˜ ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤. TypeScript ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ <code class=\"language-text\">@zeit/next-typescript/babel</code>ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-text\"><code class=\"language-text\">{\n  &quot;presets&quot;: [&quot;next/babel&quot;, &quot;@zeit/next-typescript/babel&quot;]\n}</code></pre>\n      </div>\n<h3>3. Create <code class=\"language-text\">next.config.js</code></h3>\n<p><code class=\"language-text\">next.config.js</code>ì•ˆì—ì„œëŠ” <code class=\"language-text\">webpack</code> hook ì„ ì‚¬ìš©í•˜ì—¬ webpack ì„¤ì •ì„ í•´ì£¼ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. <code class=\"language-text\">next-typescript</code> í”ŒëŸ¬ê·¸ì¸ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ export í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// next.config.js</span>\n<span class=\"token keyword\">const</span> withTypescript <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@zeit/next-typescript\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withTypescript</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function-variable function\">webpack</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">config</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> config<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h3>4. Create <code class=\"language-text\">tsconfig.json</code></h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// tsconfig.json</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"compileOnSave\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"compilerOptions\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"target\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"module\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"esnext\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"jsx\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"allowJs\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"moduleResolution\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"allowSyntheticDefaultImports\"</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"lib\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"es6\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"dom\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<hr>\n<h2>2. Components</h2>\n<h3>1. Create <code class=\"language-text\">pages/</code></h3>\n<p>Next.js ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ file system routing ì„ ì§€ì›í•©ë‹ˆë‹¤. ë¨¼ì € ì•„ë˜ì™€ ê°™ì´ index íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>\n<blockquote>\n<p><code class=\"language-text\">pages/</code> ê²½ë¡œì— <code class=\"language-text\">lol.tsx</code> íŒŒì¼ì„ ìƒì„±í•˜ë©´ <code class=\"language-text\">/lol</code> ë¼ëŠ” í˜ì´ì§€ê°€ ìƒì„±ë˜ê³  url ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</blockquote>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> pages\n$ <span class=\"token function\">touch</span> pages/index.tsx</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// pages/index.tsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> Index<span class=\"token punctuation\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">FunctionComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>hello world<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Index<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h3>2. Add scripts</h3>\n<p><code class=\"language-text\">package.json</code>ì— ì•„ë˜ì™€ ê°™ì´ next ì˜ ë¹Œë“œ/ê°œë°œ í™˜ê²½ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. <code class=\"language-text\">yarn dev</code>ë¥¼ ì‹¤í–‰í•˜ê³  <code class=\"language-text\">http://localhost:3000/</code>ì— ì ‘ì†í•˜ë©´ 'hello world'ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n<span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"next start\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"next build\"</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<blockquote>\n<p>Next.js ê°€ ë¹Œë“œëœ ê²°ê³¼ë¬¼ì´ ë‹´ê¸°ëŠ” <code class=\"language-text\">.next</code> ë¥¼ <code class=\"language-text\">.gitignore</code>ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n</blockquote>\n<h3>3. Using CSS, styled-components</h3>\n<p>CSS ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” <code class=\"language-text\">@zeit/next-css</code>ë¥¼ ì„¤ì¹˜í•˜ê³  ì•„ë˜ì™€ ê°™ì´ <code class=\"language-text\">next.config.js</code> ì— ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// next.config.js</span>\n<span class=\"token keyword\">const</span> withTypescript <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@zeit/next-typescript\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> withCss <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@zeit/next-css\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withTypescript</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">withCss</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">webpack</span><span class=\"token punctuation\">:</span> <span class=\"token parameter\">config</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> config<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p><a href=\"https://www.styled-components.com/docs/tooling#babel-plugin\">styled-component</a> ì™€ ê°™ì€ css-in-js ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì„ ì§€ì›í•˜ëŠ” babel í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  <code class=\"language-text\">.babelrc</code> íŒŒì¼ì—ë„ ì„¤ì •ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</p>\n<blockquote>\n<p>ì´ í”ŒëŸ¬ê·¸ì¸ì´ ì—†ì„ ê²½ìš°, í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ìƒì„±í•œ <code class=\"language-text\">className</code> í•´ì‹œê°’ê³¼ ì„œë²„ ì‚¬ì´ë“œì—ì„œ ìƒì„±í•œ ê°’ì´ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.</p>\n</blockquote>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> babel-plugin-styled-components -D</code></pre>\n      </div>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-text\"><code class=\"language-text\">// .babelrc\n&quot;plugins&quot;: [&quot;babel-plugin-styled-components&quot;]</code></pre>\n      </div>\n<hr>\n<h2>3. Routing</h2>\n<p>Next.js ì—ì„œ ìë™ìœ¼ë¡œ ë§Œë“¤ì–´ì£¼ëŠ” file system ë¼ìš°íŒ…ì€ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ ì§€ì›ë©ë‹ˆë‹¤. í”„ë¡œì íŠ¸ê°€ ë¡œë”©ëœ í›„ ë‚´ë¶€ì˜ ë§í¬ë¥¼ í†µí•´ì„œ ë¼ìš°íŒ…ì´ ë˜ì—ˆì„ ë•Œë§Œ í˜ì´ì§€ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë©°, ì£¼ì†Œì°½ì—ì„œ ì§ì ‘ url ì„ ì…ë ¥í•˜ë©´ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>\n<p>ì´ ë¬¸ì œëŠ” Custom server API ì— ë¼ìš°íŠ¸ë¥¼ ë“±ë¡í•˜ê³  ì„œë¹™í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ë‚´ìš©ì€ <a href=\"https://nextjs.org/learn/basics/server-side-support-for-clean-urls/create-a-custom-server\">Learn Next.js - create a custom server</a>ë¥¼ ì°¸ê³ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>\n<h3>1. Install <code class=\"language-text\">express</code></h3>\n<p>Server API ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ express ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì•„ë˜ì™€ ê°™ì´ <code class=\"language-text\">server.js</code> íŒŒì¼ì„ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> express</code></pre>\n      </div>\n<h3>2. Create <code class=\"language-text\">server.js</code></h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// server.js</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"express\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> next <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"next\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> dev <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">\"production\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dev <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> handle <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napp\n  <span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    server<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"> Ready on http://localhost:3000\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ex</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">.</span>stack<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    process<span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h3>3. Edit scripts</h3>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// package.json</span>\n<span class=\"token string\">\"scripts\"</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"dev\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"node server.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"start\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"NODE_ENV=production node server.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"build\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"next build\"</span>\n<span class=\"token punctuation\">}</span></code></pre>\n      </div>\n<h3>4. Add routes</h3>\n<p>ë§Œì•½ <code class=\"language-text\">/map</code> ê²½ë¡œì— <code class=\"language-text\">pages/map.tsx</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì£¼ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì½”ë“œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. <code class=\"language-text\">/map/:name</code>ê³¼ ê°™ì€ query parameter ë„ ì•„ë˜ì™€ ê°™ì´ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">server<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/map\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> actualPage <span class=\"token operator\">=</span> <span class=\"token string\">\"/map\"</span><span class=\"token punctuation\">;</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> actualPage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/map/:name\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">req<span class=\"token punctuation\">,</span> res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> actualPage <span class=\"token operator\">=</span> <span class=\"token string\">\"/map\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> queryParams <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> req<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>name <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  app<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> actualPage<span class=\"token punctuation\">,</span> queryParams<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<h3>5. Client side routing</h3>\n<p>í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë¼ìš°íŒ…ì€ ì•„ë˜ì²˜ëŸ¼ <code class=\"language-text\">next/link</code>ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. <code class=\"language-text\">Link</code> ì»´í¬ë„ŒíŠ¸ì˜ children ìœ¼ë¡œ <code class=\"language-text\">&lt;a&gt;</code> íƒœê·¸ë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">\"/map\"</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span>Map<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<p><code class=\"language-text\">Router.push()</code>ë¥¼ ì‚¬ìš©í•´ì„œ ê²½ë¡œë¥¼ ì´ë™í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\">Router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/map/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>title<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<hr>\n<h2>4. Data fetching</h2>\n<p>Next.js ì—ì„œëŠ” <code class=\"language-text\">getInitialProps</code>ë¥¼ í†µí•´ <code class=\"language-text\">asPath</code>, <code class=\"language-text\">query</code> ë“±ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ static í•¨ìˆ˜ëŠ” ìµœì´ˆ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ì‹œ ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ë¼ìš°íŒ…ìœ¼ë¡œ ì ‘ê·¼ ì‹œ í•œë²ˆì”©ë§Œ í˜¸ì¶œë©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\">\n      <pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Axios <span class=\"token keyword\">from</span> <span class=\"token string\">\"axios\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> NextContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">API_URL</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../store\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MapPage</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span><span class=\"token operator\">&lt;</span>Props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> query <span class=\"token punctuation\">}</span><span class=\"token punctuation\">:</span> NextContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">API_URL</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/places/?map=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>query<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> places<span class=\"token punctuation\">:</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>places <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>Map places<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>places<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MapPage<span class=\"token punctuation\">;</span></code></pre>\n      </div>\n<blockquote>\n<p><code class=\"language-text\">getInitialProps</code> ì•ˆì—ì„œëŠ” ì„œë²„ ì‚¬ì´ë“œê¸° ë•Œë¬¸ì— <code class=\"language-text\">console.log()</code>ë¥¼ ì°ìœ¼ë©´ ê²°ê³¼ê°’ì€ ë¸Œë¼ìš°ì €ê°€ ì•„ë‹ˆë¼ í„°ë¯¸ë„ì— ë‚˜íƒ€ë‚˜ê²Œ ë©ë‹ˆë‹¤.</p>\n</blockquote>\n<blockquote>\n<p>Next.js ì—ì„œ <code class=\"language-text\">API_URL</code>ê°™ì€ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ <a href=\"https://jaketrent.com/post/environment-variables-in-nextjs/\"><code class=\"language-text\">dotenv</code></a> ë˜ëŠ” Next.js ì—ì„œ ì§€ì›í•˜ëŠ” <a href=\"https://zeit.co/blog/next5-1#environment-configuration\"><code class=\"language-text\">getConfig()</code></a>ë¥¼ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p>\n</blockquote>","frontmatter":{"title":"React + Next.js + TypeScript = â¤ï¸","date":"2019-03-24","path":"/react-typescript-nextjs","tags":["nextjs","ssr","react","express","typescript"],"excerpt":"Building and deploying SSR React with NextJS"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}